/*
 * Copyright (C) 2009-2014 SAP SE or an SAP affiliate company. All rights reserved
 */
jQuery.sap.declare("i2d.pp.prdorderissue.details.controls.MilestoneChart");jQuery.sap.require("i2d.pp.prdorderissue.details.controls.Milestone");sap.ui.core.Control.extend("i2d.pp.prdorderissue.details.controls.MilestoneChart",{metadata:{properties:{"visible":{type:"boolean",defaultValue:true},"tooltip":{type:"string",defaultValue:null},"label1":{type:"string",defaultValue:"&nbsp;"},"label2":{type:"string",defaultValue:"&nbsp;"},"tooltipLabel1":{type:"string",defaultValue:null},"tooltipLabel2":{type:"string",defaultValue:null},"tooltipProgress":{type:"string",defaultValue:null},"tooltipDueTo":{type:"string",defaultValue:null}},aggregations:{items:{type:"i2d.pp.prdorderissue.details.controls.Milestone",multiple:true,singularName:"item"}}},init:function(){var u=jQuery.sap.getModulePath("i2d.pp.prdorderissue.details")+"/"+"i18n/i18n.properties";var b=new sap.ui.model.resource.ResourceModel({bundleUrl:u});b=b.getResourceBundle();this.setLabel1(b.getText("MS_PLANNED_DATE"));this.setLabel2(b.getText("MS_ACTUAL_DATE"))},renderer:function(r,c){var I=c.getItems();if(!c.getVisible()||!I||I.length===0){return}r.write("<table");r.addClass("sapMRPMSChart");r.writeControlData(c);r.writeClasses();if(null!==c.getTooltip()){r.write(' title="');r.writeEscaped(c.getTooltip());r.write('"')}r.write(">");r.write('<tr class="sapMRPMSChannel1">');r.write('<td></td>');for(var i=0;i<I.length;i++){r.write('<td colspan="2">');if(I[i].getIsDue()){var t=c.getTooltipDueTo()?c.getTooltipDueTo():"";r.write('<span class="sapMRPMSArrow" title="');r.writeEscaped(t);r.write('">');r.write('</span>')}r.write("</td>")}r.write("</tr>");r.write('<tr class="sapMRPMSChannel2">');r.write('<td></td>');var a;var o;var t=c.getTooltipProgress()?c.getTooltipProgress():"";for(var i=0;i<I.length-1;i++){a=I[i].isConfirmed();if((i+1<I.length)&&I[i+1].isConfirmed()){o=false}else{o=true}r.write("<td");if(a){r.write(' title="');r.writeEscaped(t);r.write('" ');r.addClass("sapMRPMSProgress");r.writeClasses()}r.write(">");r.write("</td>");r.write("<td");if(a&&!o){r.write(' title="');r.writeEscaped(t);r.write('" ');r.addClass("sapMRPMSProgress");r.writeClasses()}r.write(">");r.write("</td>")}r.write("</tr>");r.write('<tr class="sapMRPMSChannel3">');r.write("<td></td>");for(var i=0;i<I.length;i++){r.write('<td colspan="2"></td>')}r.write("</tr>");r.write('<tr class="sapMRPMSLabels">');r.write("<th></th>");for(var i=0;i<I.length;i++){var t=(null!==I[i].getTooltip())?I[i].getTooltip():"";var l=I[i].getLabel()?I[i].getLabel():"";var b=((i===0)||(i===I.length-1))?1:2;r.write('<th class="sapMRPMS'+(i+1)+'" colspan="'+b+'">');r.write('<span title="');r.writeEscaped(t);r.write('">');r.writeEscaped(l);r.write('</span>');r.write("</th>")}r.write("</tr>");var t=c.getTooltipLabel1()?c.getTooltipLabel1():"";r.write('<tr class="sapMRPMSPlanned">');if(I&&(I.length>0)){r.write('<th');r.write(' title="');r.writeEscaped(t);r.write('">');r.writeEscaped(c.getLabel1());r.write('</th>')}else{r.write('<th/>')}for(var i=0;i<I.length;i++){var b=((i===0)||(i===I.length-1))?1:2;var t=(null!==I[i].getTooltip())?I[i].getTooltip():"";var p=I[i].getPlannedDate()?I[i].getPlannedDate():"";r.write('<td colspan="'+b+'"');r.addClass("sapMRPMS"+(i+1));if(!I[i].isValid()){r.addClass("sapMRPMSIssue")}r.writeClasses();r.write('>');r.write('<span title="');r.writeEscaped(t);r.write('">');r.writeEscaped(p);r.write('</span>');r.write('</td>')}r.write('</tr>');var t=c.getTooltipLabel2()?c.getTooltipLabel2():"";r.write('<tr class="sapMRPMSActual">');if(I&&(I.length>0)){r.write('<th');r.write(' title="');r.writeEscaped(t);r.write('">');r.writeEscaped(c.getLabel2());r.write('</th>')}else{r.write('<th/>')}for(var i=0;i<I.length;i++){var b=((i===0)||(i===I.length-1))?1:2;var t=(null!==I[i].getTooltip())?I[i].getTooltip():"";var d=I[i].getActualDate()?I[i].getActualDate():"";r.write('<td title="');r.writeEscaped(t);r.write('" class="sapMRPMS'+(i+1)+'" colspan="'+b+'">');r.write('<span title="');r.writeEscaped(t);r.write('">');r.writeEscaped(d);r.write('</span>');r.write("</td>")}r.write('</tr>');r.write('</table>')}});
